{"version":3,"sources":["store/store.js","assets/images/user.png","hooks/useAuth.js","assets/images/hamburger.svg","components/Layout/Header.js","components/Authentification/Login.js","components/Authentification/Signup.js","pages/Authentication.js","Firebase/Firebase.js","components/UI/PostInput.js","components/Post/PostForm.js","assets/images/heart.svg","assets/images/text-bubble.svg","components/UI/Comments.js","components/Post/PostCard.js","components/Post/PostList.js","pages/Feed.js","assets/images/edit.svg","assets/images/tick.svg","assets/images/close.svg","components/Profile/ProfileInfo.js","components/Profile/ProfilePosts.js","pages/Profile.js","App.js","index.js"],"names":["initialState","isLoggedIn","localStorage","getItem","userInfo","token","userId","email","photoUrl","displayName","isErrorEmailExists","isPasswordValid","isErrorEmailNotFound","tooManyAttempts","store","createStore","state","action","type","payload","boolean","calculateRemainingTime","expirationTime","currentTime","Date","getTime","useAuth","useSelector","history","useHistory","dispatch","useDispatch","duration","storedExpirationDate","remainingTime","removeItem","retrieveStoredToken","useState","logoutTimer","setLogoutTimer","fetchProfileInfo","uid","url","setItem","substring","indexOf","avatar","fetch","method","body","JSON","stringify","headers","then","res","ok","json","console","log","catch","err","data","photo","replace","message","logout","useCallback","clear","clearTimeout","useEffect","setTimeout","login","enteredEmail","enteredPassword","password","returnSecureToken","error","idToken","localId","expiresIn","toISOString","Header","loading","setLoading","showMenu","setShowMenu","undefined","className","onClick","src","hamburger","to","Login","emailInputRef","useRef","passwordInputRef","isEmailExistent","attempts","onSubmit","event","preventDefault","current","value","ref","placeholder","required","Signup","setEmail","setPassword","confirmPassword","setConfirmPassword","matchPass","setMatchPass","lengthPass","setLengthPass","validEmail","setValidEmail","disable","setDisable","prohibited","setProhibited","validatingForm","pattern","RegExp","test","length","Filter","isProfane","onChange","target","disabled","Authentification","location","useLocation","pathname","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","PostInput","props","textInputRef","enteredText","setEnteredText","sent","rows","cols","inDropZone","onDrop","file","dataTransfer","files","match","URL","createObjectURL","fileUpload","dropDepth","onDragOver","dropEffect","onDragEnter","onDragLeave","text","reducer","PostForm","timer","setSent","nrChars","setNrChars","sentMessage","setSentMessage","useReducer","fetchPost","imageURL","sendPost","alt","filter","name","uploadTask","storage","child","put","on","TaskEvent","STATE_CHANGED","snapshot","getDownloadURL","Comments","commentsShow","setCommentsShow","commentsList","setCommentsList","textComment","setTextComment","loadedComments","setLoadedComments","usersInfo","commentInfo","id","comments","userPost","push","comment","userIndex","textBubble","color","height","width","map","onKeyPress","key","commentData","e","columns","PostCard","isLiked","setIsLiked","Object","keys","likes","likesQuantity","setLikesQuantity","userLikeId","setUserLikeId","displayPost","setDisplayPost","user","likeId","ownProfile","window","confirm","response","heart","PostList","posts","setPosts","fetchPostsHandler","a","likeInfo","likesList","loadedPosts","currentUserId","postLikeId","toggleNewPost","postList","post","reverse","Feed","setToggleNewPost","ProfileInfo","uploadedFileInput","setPhotoUrl","setDisplayName","enteredName","setEnteredName","isPhotoEdit","setIsPhotoEdit","isPhotoAdded","setIsPhotoAdded","isEditing","setIsEditing","isEnteredNameValid","setIsEnteredNameValid","nameEditHandler","photoEditHandler","fetchEditedData","bodyFetch","accept","tick","close","edit","div","ProfilePosts","fetchPosts","Profile","userDisplayName","slice","App","path","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff011f91.chunk.js","sourcesContent":["import { createStore } from \"redux\";\r\n\r\nconst initialState = {\r\n  isLoggedIn: !!localStorage.getItem(\"token\"),\r\n  userInfo: {\r\n    token: localStorage.getItem(\"token\"),\r\n    userId: localStorage.getItem(\"userId\"),\r\n    email: localStorage.getItem(\"email\"),\r\n    photoUrl: localStorage.getItem(\"photoUrl\"),\r\n    displayName: localStorage.getItem(\"displayName\"),\r\n  },\r\n  isErrorEmailExists: false,\r\n  isPasswordValid: false,\r\n  isErrorEmailNotFound: false,\r\n  tooManyAttempts: false,\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"LOGIN\":\r\n      return {\r\n        ...state,\r\n        userInfo: {\r\n          ...state.userInfo,\r\n          token: action.payload.token,\r\n          userId: action.payload.userId,\r\n          email: action.payload.email,\r\n        },\r\n        isLoggedIn: true,\r\n      };\r\n    case \"SET_USER_INFO\":\r\n      return {\r\n        ...state,\r\n        userInfo: {\r\n          ...state.userInfo,\r\n          photoUrl: action.payload.photoUrl,\r\n          displayName: action.payload.displayName,\r\n        },\r\n      };\r\n    case \"LOGOUT\":\r\n      return {\r\n        ...state,\r\n        userInfo: {\r\n          token: \"\",\r\n          userId: \"\",\r\n          email: \"\",\r\n          photoUrl: \"\",\r\n          displayName: \"\",\r\n        },\r\n        isLoggedIn: false,\r\n      };\r\n    case \"CHANGE_NAME\":\r\n      return { ...state, displayName: action.displayName };\r\n    case \"EMAIL_EXISTS\":\r\n      return {\r\n        ...state,\r\n        isErrorEmailExists: action.boolean,\r\n      };\r\n    case \"EMAIL_NOT_FOUND\":\r\n      return {\r\n        ...state,\r\n        isErrorEmailNotFound: action.boolean,\r\n      };\r\n    case \"INVALID_PASSWORD\":\r\n      return { ...state, isPasswordValid: action.boolean };\r\n    case \"TOO_MANY_ATTEMPTS_TRY_LATER\":\r\n      return { ...state, tooManyAttempts: action.boolean };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst store = createStore(authReducer);\r\nexport default store;\r\n","export default __webpack_public_path__ + \"static/media/user.c9207524.png\";","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport avatar from \"../assets/images/user.png\";\r\n\r\nconst calculateRemainingTime = (expirationTime) => {\r\n  const currentTime = new Date().getTime();\r\n  const adjExpirationTime = new Date(expirationTime).getTime();\r\n  const remainingDuration = adjExpirationTime - currentTime;\r\n  return remainingDuration;\r\n};\r\nconst retrieveStoredToken = () => {\r\n  const storedExpirationDate = localStorage.getItem(\"expirationTime\");\r\n  const remainingTime = calculateRemainingTime(storedExpirationDate);\r\n  if (remainingTime <= 60000) {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"expirationTime\");\r\n    return null;\r\n  }\r\n  return remainingTime;\r\n};\r\n\r\nconst useAuth = () => {\r\n  const info = useSelector((state) => state.userInfo);\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const duration = retrieveStoredToken();\r\n  const [logoutTimer, setLogoutTimer] = useState(\r\n    localStorage.getItem(\"expirationTime\")\r\n  );\r\n\r\n  const login = (url, enteredEmail, enteredPassword) => {\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        email: enteredEmail,\r\n        password: enteredPassword,\r\n        returnSecureToken: true,\r\n      }),\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          dispatch({ type: \"IS_ERROR\", boolean: false });\r\n          return res.json();\r\n        } else {\r\n          res.json().then((data) => {\r\n            if (data.error.message === \"EMAIL_EXISTS\") {\r\n              dispatch({ type: \"EMAIL_EXISTS\", boolean: true });\r\n            }\r\n            if (data.error.message === \"EMAIL_NOT_FOUND\") {\r\n              dispatch({ type: \"EMAIL_NOT_FOUND\", boolean: true });\r\n            }\r\n            if (data.error.message === \"INVALID_PASSWORD\") {\r\n              dispatch({ type: \"INVALID_PASSWORD\", boolean: true });\r\n            }\r\n            if (data.error.message === \"TOO_MANY_ATTEMPTS_TRY_LATER\"){\r\n              dispatch({type:\"TOO_MANY_ATTEMPTS_TRY_LATER\", boolean: true})\r\n            }\r\n            console.log(data.error);\r\n          });\r\n        }\r\n      })\r\n      .then((data) => {\r\n        dispatch({\r\n          type: \"LOGIN\",\r\n          payload: {\r\n            token: data.idToken,\r\n            userId: data.localId,\r\n            email: data.email,\r\n          },\r\n        });\r\n        localStorage.setItem(\"token\", data.idToken);\r\n        localStorage.setItem(\"userId\", data.localId);\r\n        localStorage.setItem(\"email\", data.email);\r\n\r\n        const expirationTime = new Date(\r\n          new Date().getTime() + +data.expiresIn * 1000\r\n        );\r\n        localStorage.setItem(\"expirationTime\", expirationTime.toISOString());\r\n        const remainingTime = calculateRemainingTime(expirationTime);\r\n\r\n        setLogoutTimer(setTimeout(logout, remainingTime));\r\n\r\n        fetchProfileInfo(data.idToken, data.localId, data.email, url);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      });\r\n  };\r\n  const fetchProfileInfo = (token, uid, email, url) => {\r\n    if (\r\n      url ===\r\n      \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBSIZSdghkjvJ_8hJt-FAicfpHNpUAVsPI\"\r\n    ) {\r\n      localStorage.setItem(\r\n        \"displayName\",\r\n        email.substring(0, email.indexOf(\"@\"))\r\n      );\r\n      localStorage.setItem(\"photoUrl\", avatar);\r\n      dispatch({\r\n        type: \"SET_USER_INFO\",\r\n        payload: {\r\n          displayName: email.substring(0, email.indexOf(\"@\")),\r\n          photoUrl: avatar,\r\n        },\r\n      });\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/users/${uid}.json?auth=${token}`,\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({\r\n            email: email,\r\n            displayName: email.substring(0, email.indexOf(\"@\")),\r\n            photoUrl: \"\",\r\n          }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            return res.json();\r\n          } else {\r\n            console.log(res);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/users/${uid}.json?auth=${token}`\r\n      )\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            return res.json();\r\n          } else {\r\n            console.log(res);\r\n            res.json().then((data) => {});\r\n          }\r\n        })\r\n        .then((data) => {\r\n          let photo = \"\";\r\n\r\n          if (data.photoUrl === \"\") {\r\n            photo = avatar;\r\n          } else {\r\n            photo = data.photoUrl;\r\n          }\r\n          localStorage.setItem(\"displayName\", data.displayName);\r\n          localStorage.setItem(\"photoUrl\", photo);\r\n          dispatch({\r\n            type: \"SET_USER_INFO\",\r\n            payload: { displayName: data.displayName, photoUrl: photo },\r\n          });\r\n          return history.replace(\"/feed\");\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.message);\r\n        });\r\n    }\r\n    history.replace(\"/social-media/feed\");\r\n  };\r\n  const logout = useCallback(() => {\r\n    localStorage.clear();\r\n    dispatch({ type: \"LOGOUT\" });\r\n    if (logoutTimer) {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [logoutTimer, dispatch]);\r\n\r\n \r\n  useEffect(() => {\r\n    if (duration) {\r\n      setLogoutTimer(setTimeout(logout, duration));\r\n    }\r\n  }, [setLogoutTimer]);\r\n  return { login, logout };\r\n};\r\nexport default useAuth;\r\n","export default __webpack_public_path__ + \"static/media/hamburger.ab2c8b29.svg\";","import { Link, useHistory } from \"react-router-dom\";\r\nimport \"./Header.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useState, useEffect } from \"react\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport hamburger from \"../../assets/images/hamburger.svg\";\r\nconst Header = () => {\r\n  const history = useHistory();\r\n  const isLoggedIn = useSelector((state) => state.isLoggedIn);\r\n  const photoUrl = useSelector((state) => state.userInfo.photoUrl);\r\n  const displayName = useSelector((state) => state.userInfo.displayName);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const { logout } = useAuth();\r\n  const logoutHandler = () => {\r\n    logout();\r\n    history.replace(\"/\");\r\n  };\r\n  const toggleShowHide = () => {\r\n    setShowMenu((showMenu) => !showMenu);\r\n  };\r\n  useEffect(() => {\r\n    if (displayName === undefined || photoUrl === undefined) {\r\n      setLoading(true);\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [displayName, photoUrl]);\r\n  return (\r\n    <header className={isLoggedIn && showMenu ? 'expand-header' : ''}>\r\n      <nav className={`header-nav  ${isLoggedIn ? 'header-nav-mobile' : ''}`}>\r\n        {isLoggedIn && (\r\n          <button className={`header-nav-menu ${showMenu ? 'fade-menu' : ''}`} onClick={toggleShowHide}>\r\n            <img src={hamburger} />\r\n          </button>\r\n        )}\r\n        <ul className={`header-nav-list ${!showMenu && isLoggedIn ? 'hide-menu' : ''} ${isLoggedIn ? 'header-nav-list-logged' : ''}`}>\r\n          {isLoggedIn && (\r\n            <li className=\"header-nav-feed \">\r\n              <Link to=\"/social-media/feed\">Home</Link>\r\n            </li>\r\n          )}\r\n          {isLoggedIn &&\r\n            (!loading ? (\r\n              <li>\r\n                <Link to=\"/social-media/profile\" className=\"header-nav-profile\">\r\n                  <div className=\"header-div-avatar\">\r\n                    <img src={photoUrl} />\r\n                  </div>\r\n                  {displayName}\r\n                </Link>\r\n              </li>\r\n            ) : (\r\n              <p>Loading...</p>\r\n            ))}\r\n          {isLoggedIn && (\r\n            <li className=\"header-nav-button-container\">\r\n              <button onClick={logoutHandler} className=\"header-nav-button\">\r\n                Logout\r\n              </button>\r\n            </li>\r\n          )}\r\n          {!isLoggedIn && (\r\n            <li className=\"header-nav-login\">\r\n              <Link to=\"/social-media/login\">Login</Link>\r\n            </li>\r\n          )}\r\n          {!isLoggedIn && (\r\n            <li className=\"header-nav-signup\">\r\n              <Link to=\"/social-media/signup\">Sign up</Link>\r\n            </li>\r\n          )}\r\n        </ul>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\nexport default Header;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useRef } from \"react\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport \"./AuthForm.css\";\r\nconst Login = () => {\r\n  const { login } = useAuth();\r\n  const dispatch = useDispatch();\r\n  const emailInputRef = useRef();\r\n  const passwordInputRef = useRef();\r\n  \r\n  const isEmailExistent = useSelector((state) => state.isErrorEmailNotFound);\r\n  const isPasswordValid = useSelector((state) => state.isPasswordValid);\r\n  const attempts =useSelector((state) => state.tooManyAttempts);\r\n\r\n  const loginHandler = (event) => {\r\n    event.preventDefault();\r\n    const enteredEmail = emailInputRef.current.value;\r\n    const enteredPassword = passwordInputRef.current.value;\r\n    dispatch({type:'EMAIL_NOT_FOUND',boolean:false});\r\n    dispatch({type:'INVALID_PASSWORD',boolean:false});\r\n    dispatch({type:'TOO_MANY_ATTEMPTS_TRY_LATER',boolean:false});\r\n    login(\r\n      \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBSIZSdghkjvJ_8hJt-FAicfpHNpUAVsPI\",\r\n      enteredEmail,\r\n      enteredPassword\r\n    );\r\n   \r\n  };\r\n  return (\r\n    <form onSubmit={loginHandler} className=\"authentification-form\">\r\n      <div className=\"authentification-form__name\" >\r\n        <h1>Login</h1>\r\n      </div>\r\n      <div className=\"authentification-form__inputs\">\r\n        <input className={isEmailExistent ? 'invalid' : ''} type=\"email\" ref={emailInputRef} placeholder=\"Email\" required />\r\n        {isEmailExistent && <p className=\"authentification-form__invalid\">Invalid email</p>}\r\n        <input className={isPasswordValid ? 'invalid' : ''}  type=\"password\" ref={passwordInputRef} placeholder=\"Password\" required />\r\n        {isPasswordValid && <p className=\"authentification-form__invalid\">Invalid password</p>}\r\n        {attempts && <p className=\"authentification-form__invalid\">Too many failed attempts, try again later.</p>}\r\n        <div className=\"authentification-form__actions\">\r\n          <input type=\"submit\" className=\"authentification-form__submit\" value=\"Sign in\" />\r\n          <Link to=\"/social-media/signup\" className=\"authentification-form__link\">Create account</Link>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\nexport default Login;\r\n","import { Link } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport \"./AuthForm.css\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport Filter from 'bad-words';\r\nconst Signup = () => {\r\n  const dispatch = useDispatch();\r\n  const { login } = useAuth();\r\n  const isEmailExistent = useSelector((state) => state.isErrorEmailExists);\r\n  \r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  const [matchPass, setMatchPass] = useState();\r\n  const [lengthPass, setLengthPass] = useState();\r\n  const [validEmail, setValidEmail] = useState();\r\n  const [disable, setDisable] = useState(false);\r\n  const [prohibited,setProhibited]=useState(false);\r\n\r\n  const validatingForm = () => {\r\n    var pattern = new RegExp(\r\n      /^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i\r\n    );\r\n    setValidEmail(!pattern.test(email));\r\n    setMatchPass(password !== confirmPassword);\r\n    setLengthPass(password.length < 6);\r\n    return matchPass || lengthPass || validEmail;\r\n  };\r\n  useEffect(() => {\r\n    setDisable(validatingForm());\r\n  }, [validatingForm]);\r\n\r\n  const signupHandler = (event) => {\r\n    event.preventDefault();\r\n    setProhibited(false);\r\n    var filter = new Filter();\r\n    if (filter.isProfane(email)){\r\n      setProhibited(true);\r\n      return;\r\n    }\r\n    if (!disable) {\r\n      login(\r\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBSIZSdghkjvJ_8hJt-FAicfpHNpUAVsPI\",\r\n        email,\r\n        password\r\n      );\r\n    }\r\n  };\r\n  const emailHandler = (event) => {\r\n    dispatch({ type: \"EMAIL_EXISTS\", boolean: false });\r\n    setEmail(event.target.value);\r\n  };\r\n  const passwordHandler = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n  const confirmPasswordHandler = (event) => {\r\n    setConfirmPassword(event.target.value);\r\n  };\r\n  return (\r\n    <form onSubmit={signupHandler} className=\"authentification-form\">\r\n      <div className=\"authentification-form__name\">\r\n        <h1>Sign up</h1>\r\n      </div>\r\n      <div className=\"authentification-form__inputs\">\r\n        <input className={isEmailExistent || validEmail ? 'invalid': ''} type=\"email\" value={email} onChange={emailHandler} required />\r\n        {isEmailExistent && <p className=\"authentification-form__invalid\">Email exists already</p>}\r\n        {validEmail && <p className=\"authentification-form__invalid\">Email is not valid</p>}\r\n        {prohibited && <p className=\"authentification-form__invalid\">Innappropriate language</p>}\r\n        <input className={lengthPass ? 'invalid': ''}\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={passwordHandler}\r\n          required\r\n        />\r\n        {lengthPass && <p className=\"authentification-form__invalid\">Password is shorter than 6 characters</p>}\r\n\r\n        <input\r\n        className={matchPass ? 'invalid': ''}\r\n          type=\"password\"\r\n          value={confirmPassword}\r\n          onChange={confirmPasswordHandler}\r\n          required\r\n        />\r\n        {matchPass && <p className=\"authentification-form__invalid\">Passwords do not match</p>}\r\n        <div className=\"authentification-form__actions\">\r\n          <input type=\"submit\" value=\"Sign up\" className=\"authentification-form__submit\" disabled={disable} />\r\n          <Link to=\"/social-media/login\" className=\"authentification-form__link\">Have account already?</Link>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\nexport default Signup;\r\n","import Login from \"../components/Authentification/Login\";\r\nimport Signup from \"../components/Authentification/Signup\";\r\nimport { useLocation } from \"react-router-dom\";\r\nconst Authentification = () => {\r\n  const location = useLocation();\r\n  return <div>{location.pathname === \"/social-media/login\" ? <Login /> : <Signup />}</div>;\r\n};\r\nexport default Authentification;\r\n","import firebase from 'firebase'\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \" AIzaSyBSIZSdghkjvJ_8hJt-FAicfpHNpUAVsPI \",\r\n  authDomain: \"https://react-http-560ff-default-rtdb.firebaseapp.com\",\r\n  projectId: \"react-http-560ff\",\r\n  storageBucket: \"react-http-560ff.appspot.com\",\r\n  messagingSenderId: \"\",\r\n  appId: \"\"\r\n};\r\n  firebase.initializeApp(firebaseConfig);\r\n  export default firebase;\r\n","import { useRef, useState, useEffect } from \"react\";\r\nimport \"./PostInput.css\";\r\n\r\nconst PostInput = (props) => {\r\n  const { data, dispatch } = props;\r\n  const textInputRef = useRef();\r\n  const [enteredText, setEnteredText] = useState(\"\");\r\n  const handleDragEnter = (event) => {\r\n    event.preventDefault();\r\n    dispatch({ type: \"SET_DROP_DEPTH\", dropDepth: data.dropDepth + 1 });\r\n  };\r\n\r\n  const handleDragLeave = (event) => {\r\n    event.preventDefault();\r\n    dispatch({ type: \"SET_DROP_DEPTH\", dropDepth: data.dropDepth - 1 });\r\n    dispatch({ type: \"SET_IN_DROP_ZONE\", inDropZone: false });\r\n  };\r\n  const handleDragOver = (event) => {\r\n    event.preventDefault();\r\n    event.dataTransfer.dropEffect = \"copy\";\r\n    dispatch({ type: \"SET_IN_DROP_ZONE\", inDropZone: true });\r\n  };\r\n  const handleDrop = (event) => {\r\n    event.preventDefault();\r\n\r\n    let file = [...event.dataTransfer.files];\r\n    var imageType = /image.*/;\r\n    if (!file[0].type.match(imageType)) {\r\n      return;\r\n    }\r\n    if (file && file.length > 0) {\r\n      console.log(URL.createObjectURL(file[0]));\r\n      let fileUpload = file[0];\r\n\r\n      dispatch({ type: \"ADD_FILE\", fileUpload });\r\n      dispatch({ type: \"SET_DROP_DEPTH\", dropDepth: 0 });\r\n      dispatch({ type: \"SET_IN_DROP_ZONE\", inDropZone: false });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (props.sent) {\r\n      setEnteredText(\"\");\r\n    }\r\n  }, [props.sent]);\r\n  const getTextHandler = (event) => {\r\n    setEnteredText(event.target.value);\r\n    const text = textInputRef.current.value;\r\n    dispatch({ type: \"ADD_TEXT\", text });\r\n  };\r\n  return (\r\n    <textarea\r\n      rows=\"4\"\r\n      cols=\"50\"\r\n      className={\r\n        data.inDropZone ? \"drag-drop-zone inside-drag-area\" : \"drag-drop-zone\"\r\n      }\r\n      onDrop={handleDrop}\r\n      onDragOver={handleDragOver}\r\n      onDragEnter={handleDragEnter}\r\n      onDragLeave={handleDragLeave}\r\n      ref={textInputRef}\r\n      onChange={getTextHandler}\r\n      value={enteredText}\r\n      placeholder=\"Add text,image or gif ...\"\r\n    ></textarea>\r\n  );\r\n};\r\nexport default PostInput;\r\n","import { useState, useReducer, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport firebase from \"../../Firebase/Firebase\";\r\nimport \"./PostForm.css\";\r\nimport Filter from 'bad-words';\r\nimport PostInput from \"../UI/PostInput\";\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_TEXT\":\r\n      return { ...state, text: action.text };\r\n    case \"SET_DROP_DEPTH\":\r\n      return { ...state, dropDepth: action.dropDepth };\r\n    case \"SET_IN_DROP_ZONE\":\r\n      return { ...state, inDropZone: action.inDropZone };\r\n    case \"ADD_FILE\":\r\n      return { ...state, file: action.fileUpload };\r\n    case \"DELETE_FILE\":\r\n      return {\r\n        ...state,\r\n        file: {},\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nconst PostForm = (props) => {\r\n  let timer = null;\r\n  const idToken = useSelector((state) => state.userInfo.token);\r\n  const userId = useSelector((state) => state.userInfo.userId);\r\n  const photoUrl = useSelector((state) => state.userInfo.photoUrl);\r\n  const displayName = useSelector((state) => state.userInfo.displayName);\r\n  const [prohibited,setProhibited]=useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [sent, setSent] = useState(false);\r\n  const [nrChars, setNrChars] = useState(0);\r\n  const [sentMessage, setSentMessage] = useState(false);\r\n  const [data, dispatch] = useReducer(reducer, {\r\n    text: \"\",\r\n    dropDepth: 0,\r\n    inDropZone: false,\r\n    file: {},\r\n  });\r\n  const { file } = data;\r\n  const { text } = data;\r\n  const deleteImageHandler = () => {\r\n    dispatch({ type: \"DELETE_FILE\" });\r\n  };\r\n  useEffect(() => {\r\n    if (photoUrl === undefined || displayName === undefined) {\r\n      setLoading(true);\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [photoUrl, displayName]);\r\n  const postHandler = (event) => {\r\n    setProhibited(false);\r\n    setNrChars(0);\r\n    event.preventDefault();\r\n    var filter = new Filter(); \r\n    setSent(false);\r\n    if (text.length < 1) {\r\n      return;\r\n    }\r\n    if (text.length > 300) {\r\n      setNrChars(text.length);\r\n      return;\r\n    }\r\n    if(filter.isProfane(text)){\r\n      setProhibited(true);\r\n      return;\r\n    }\r\n    if (file.name) {\r\n      var storage = firebase.storage();\r\n      var storageRef = storage.ref();\r\n      var uploadTask = storageRef\r\n        .child(`postsImage/${userId}/${file.name}`)\r\n        .put(file);\r\n      console.log(file);\r\n      uploadTask.on(\r\n        firebase.storage.TaskEvent.STATE_CHANGED,\r\n        (snapshot) => {},\r\n        (error) => {\r\n          throw error;\r\n        },\r\n        () => {\r\n          uploadTask.snapshot.ref.getDownloadURL().then((url) => {\r\n            fetchPost(text, url);\r\n          });\r\n        }\r\n      );\r\n    } else {\r\n      fetchPost(text, \"\");\r\n    }\r\n  };\r\n  const fetchPost = (text, imageURL) => {\r\n    fetch(\r\n      `https://react-http-560ff-default-rtdb.firebaseio.com/posts/${userId}.json?auth=${idToken}`,\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ text, imageURL }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          setSent(true);\r\n          setSentMessage(true);\r\n\r\n          timer = setTimeout(() => {\r\n            setSentMessage(false);\r\n          }, 3000);\r\n          dispatch({ type: \"DELETE_FILE\" });\r\n          return res.json();\r\n        } else {\r\n          res.json().then((data) => {\r\n            console.log(data);\r\n          });\r\n        }\r\n      })\r\n      .then((data) => {\r\n        props.sendPost();\r\n      });\r\n    return () => clearTimeout(timer);\r\n  };\r\n  return (\r\n    <div className=\"post-form__container\">\r\n      {!loading ? (\r\n        <div className=\"post-form__heading\">\r\n          <div className=\"post-form__avatar\">\r\n            <img src={photoUrl} alt=\"profile pic\" />\r\n          </div>\r\n          <div className=\"post-form__name\">{displayName}</div>\r\n        </div>\r\n      ) : (\r\n        <p>Loading...</p>\r\n      )}\r\n      <form className=\"post-form__form\" onSubmit={postHandler}>\r\n        {sentMessage && <div className=\"post-form__message\">Posted!</div>}\r\n        <PostInput data={data} dispatch={dispatch} sent={sent} />\r\n        {file.name && (\r\n          <div className=\"post-form__dropped-file\">\r\n            <button\r\n              className=\"post-form__dropped-file__undo\"\r\n              onClick={deleteImageHandler}\r\n            >\r\n              x\r\n            </button>\r\n            <img src={URL.createObjectURL(file)} alt={file.name} />\r\n          </div>\r\n        )}\r\n        {nrChars > 300 && (\r\n          <p>Only 300 characters allowed, you have {nrChars}</p>\r\n        )}\r\n        {prohibited && <p>Prohibited language!</p>}\r\n        <input type=\"submit\" className=\"post-form__submit\" value=\"Post\" />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default PostForm;\r\n//\r\n","export default __webpack_public_path__ + \"static/media/heart.7da58c3c.svg\";","export default __webpack_public_path__ + \"static/media/text-bubble.dd06dd25.svg\";","import \"./Comments.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport textBubble from \"../../assets/images/text-bubble.svg\";\r\nimport Filter from \"bad-words\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nconst Comments = (props) => {\r\n  const [commentsShow, setCommentsShow] = useState(false);\r\n  const uid = useSelector((state) => state.userInfo.userId);\r\n  const token = useSelector((state) => state.userInfo.token);\r\n  const displayName = useSelector((state) => state.userInfo.displayName);\r\n  const photoUrl = useSelector((state) => state.userInfo.photoUrl);\r\n  const [commentsList, setCommentsList] = useState([]);\r\n  const [textComment, setTextComment] = useState(\"\");\r\n\r\n  const [nrChars, setNrChars] = useState(0);\r\n  const [prohibited, setProhibited] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadedComments, setLoadedComments] = useState(false);\r\n\r\n  const toggleCommentsHandler = () => {\r\n    setCommentsShow((commentsShow) => !commentsShow);\r\n  };\r\n  useEffect(() => {\r\n    let usersInfo = {};\r\n    let commentInfo = [];\r\n    if (commentsShow && !loadedComments) {\r\n      setLoading(true);\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/comments/${props.id}.json`\r\n      )\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            return res.json();\r\n          } else {\r\n            res.json().then((data) => {\r\n              console.log(data);\r\n            });\r\n          }\r\n        })\r\n        .then((data) => {\r\n          for (const userId in data) {\r\n            let comments = [];\r\n            for (const userPost in data[userId]) {\r\n              comments.push(data[userId][userPost].comment);\r\n            }\r\n            commentInfo.push({\r\n              userId,\r\n              comments,\r\n              displayName: \"\",\r\n              photoUrl: \"\",\r\n            });\r\n          }\r\n\r\n          return fetch(\r\n            `https://react-http-560ff-default-rtdb.firebaseio.com/users.json`\r\n          )\r\n            .then((res) => {\r\n              if (res.ok) {\r\n                return res.json();\r\n              } else {\r\n                res.json().then((data) => {\r\n                  console.log(data);\r\n                });\r\n              }\r\n            })\r\n            .then((data) => {\r\n              for (const userId in data) {\r\n                usersInfo[userId] = {\r\n                  displayName: data[userId].displayName,\r\n                  photoUrl: data[userId].photoUrl,\r\n                };\r\n              }\r\n              let userId = \"\";\r\n              for (const userIndex in commentInfo) {\r\n                userId = commentInfo[userIndex].userId;\r\n                commentInfo[userIndex].displayName =\r\n                  usersInfo[userId].displayName;\r\n                commentInfo[userIndex].photoUrl = usersInfo[userId].photoUrl;\r\n              }\r\n              setCommentsList(commentInfo);\r\n              setLoading(false);\r\n              setLoadedComments(true);\r\n              console.log(commentInfo)\r\n            });\r\n        });\r\n    }\r\n  }, [commentsShow]);\r\n  const onKeyUp = (event) => {\r\n    if (event.key === \"Enter\") {\r\n      let commentData = event.target.value;\r\n      var filter = new Filter();\r\n      setProhibited(false);\r\n      if (filter.isProfane(commentData)) {\r\n        setProhibited(true);\r\n        return;\r\n      }\r\n      if (commentData.length < 1) {\r\n        return;\r\n      }\r\n      if (commentData.length > 300) {\r\n        setNrChars(commentData.length);\r\n        return;\r\n      }\r\n      //displayName will not be sent to fetch only used localy when comment is created\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/comments/${props.id}/${uid}.json?auth=${token}`,\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify({ comment: commentData }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            console.log(res);\r\n            return res.json();\r\n          } else {\r\n            res.json().then((data) => {\r\n              console.log(data);\r\n            });\r\n          }\r\n        })\r\n        .then((data) => {\r\n          setCommentsList((commentsList) => [\r\n            ...commentsList,\r\n            {\r\n              displayName,\r\n              photoUrl,\r\n              comments: [commentData],\r\n            },\r\n          ]);\r\n          setTextComment(\"\");\r\n        });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"comments-section\">\r\n      <button\r\n        className=\"comments-section__button\"\r\n        onClick={toggleCommentsHandler}\r\n      >\r\n        <img src={textBubble} />\r\n      </button>\r\n      {commentsShow &&\r\n        (loading ? (\r\n          <Loader type=\"ThreeDots\" color=\"#585d99\" height={50} width={50} />\r\n        ) : (\r\n          <div className=\"comments-section__container\">\r\n            <ul className=\"comments-section__list\">\r\n              {commentsList.map((comment) =>\r\n                comment.comments.map((text) => (\r\n                  <li>\r\n                    <div>\r\n                      <div className=\"comments-section__user-info\">\r\n                        <img\r\n                          className=\"comments-section__avatar\"\r\n                          src={comment.photoUrl}\r\n                        />\r\n                        <div>{comment.displayName}</div>\r\n                      </div>\r\n                      <div className=\"comments-section__comment\">{text}</div>\r\n                    </div>\r\n                  </li>\r\n                ))\r\n              )}\r\n            </ul>\r\n            <textarea\r\n              onKeyPress={onKeyUp}\r\n              onChange={(e) => {\r\n                setTextComment(e.target.value);\r\n                setNrChars(0);\r\n              }}\r\n              placeholder=\"Write a comment...\"\r\n              value={textComment}\r\n              className=\"comments-section__container__write\"\r\n              rows=\"4\"\r\n              columns=\"50\"\r\n            ></textarea>\r\n            {nrChars > 300 && (\r\n              <p className=\"comments-section__warning\">\r\n                Comment should be less than 300 chars,you have {nrChars}\r\n              </p>\r\n            )}\r\n            {prohibited && (\r\n              <p className=\"comments-section__warning\">\r\n                Innapropriate language\r\n              </p>\r\n            )}\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\nexport default Comments;\r\n","import { Link } from \"react-router-dom\";\r\nimport heart from \"../../assets/images/heart.svg\";\r\nimport \"./PostCard.css\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Comments from \"../UI/Comments\";\r\nconst PostCard = (props) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  const userId = localStorage.getItem(\"userId\");\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [likesQuantity, setLikesQuantity] = useState(\r\n    Object.keys(props.likes).length\r\n  );\r\n  const [userLikeId, setUserLikeId] = useState(\"\");\r\n  const [displayPost, setDisplayPost] = useState(true);\r\n  const deletePostHandler = () => {\r\n    //in order to avoid fetching multiple times on delete,better to temporary remove\r\n    setDisplayPost(false);\r\n    fetch(\r\n      `https://react-http-560ff-default-rtdb.firebaseio.com/posts/${props.userId}/${props.id}.json?auth=${token}`,\r\n      {\r\n        method: \"DELETE\",\r\n      }\r\n    ).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      } else {\r\n        res.json().then((data) => {\r\n          console.log(data);\r\n        });\r\n      }\r\n    });\r\n  };\r\n  const likeHandler = () => {\r\n    if (isLiked) {\r\n      setIsLiked(false);\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/liked/${props.id}/${userLikeId}/.json`,\r\n        { method: \"DELETE\" }\r\n      )\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setUserLikeId(\"\");\r\n          setLikesQuantity((likesQuantity) => likesQuantity - 1);\r\n        });\r\n    } else {\r\n      setIsLiked(true);\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/liked/${props.id}.json`,\r\n        {\r\n          method: \"POST\",\r\n          body: JSON.stringify(localStorage.getItem(\"userId\")),\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n        }\r\n      ).then((res) => {\r\n        if (res.ok) {\r\n          console.log(res);\r\n          setLikesQuantity((likesQuantity) => likesQuantity + 1);\r\n          return res.json();\r\n        } else {\r\n          res.json().then((data) => {\r\n            console.log(data);\r\n          });\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const confirmationHandler = () => {\r\n    var question = window.confirm(\"Your post will be deleted\");\r\n    if (question) {\r\n      deletePostHandler();\r\n    } else {\r\n      return;\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    for (const user in props.likes) {\r\n      for (const likeId in props.likes[user]) {\r\n        if (props.likes[user][likeId] === userId) {\r\n          setUserLikeId(likeId);\r\n          setIsLiked(true);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }, []);\r\n  return (\r\n    displayPost && (\r\n      <div className=\"post-card\">\r\n        <div className=\"post-card__heading\">\r\n          <Link to={`/social-media/user/${props.userId}`}>\r\n            <img className=\"post-card__avatar\" src={props.photoUrl} />\r\n            {props.displayName}\r\n          </Link>\r\n          <div>\r\n            {props.ownProfile && (\r\n              <button\r\n                className=\"post-card__heading__delete\"\r\n                onClick={confirmationHandler}\r\n              >\r\n                x\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"post-card__content\">\r\n          <div className=\"post-card__text\">{props.text}</div>\r\n          {props.imageURL && (\r\n            <div className=\"post-card__image\">\r\n              <img src={props.imageURL} />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"post-card__actions\">\r\n          <div className=\"post-card__likes\">\r\n            <button onClick={likeHandler}>\r\n              <img src={heart} className={isLiked ? \"liked\" : \"\"} />\r\n            </button>\r\n            <div>{props.likes && likesQuantity}</div>\r\n          </div>\r\n          <Comments id={props.id} />\r\n        </div>\r\n      </div>\r\n    )\r\n  );\r\n};\r\nexport default PostCard;\r\n","import \"./PostList.css\";\r\nimport PostCard from \"./PostCard\";\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nconst PostList = (props) => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const token = useSelector((state) => state.userInfo.token);\r\n  const fetchPostsHandler = useCallback(async () => {\r\n    setLoading(true);\r\n    let usersInfo = [];\r\n    let likeInfo = [];\r\n    let likesList = [];\r\n\r\n    fetch(\r\n      `https://react-http-560ff-default-rtdb.firebaseio.com/users.json?`\r\n    )\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        for (const user in data) {\r\n          usersInfo.push({\r\n            id: user,\r\n            displayName: data[user].displayName,\r\n            photoUrl:data[user].photoUrl\r\n          });\r\n        }\r\n        return  fetch(`https://react-http-560ff-default-rtdb.firebaseio.com/liked.json`)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          likeInfo = data;\r\n          return  fetch(`https://react-http-560ff-default-rtdb.firebaseio.com/posts.json`)\r\n          .then((response) => response.json())\r\n          .then((data) => {\r\n            const loadedPosts = [];\r\n          \r\n          for (const uid in data) {\r\n            let currentUserId = \"\";\r\n            for (const user in usersInfo) {\r\n              if (usersInfo[user].id === uid) {\r\n                currentUserId = usersInfo[user];               \r\n              }\r\n            }\r\n            for (const key in data[uid]) {\r\n              likesList = [];\r\n              for (const postLikeId in likeInfo) {\r\n                if (postLikeId === key) {\r\n                  likesList.push(likeInfo[postLikeId]);\r\n                }\r\n              }\r\n              loadedPosts.push({\r\n                ...data[uid][key],\r\n                id: key,\r\n                userId: uid,\r\n                displayName: currentUserId.displayName,\r\n                photoUrl: currentUserId.photoUrl,\r\n                likes: likesList,\r\n              });\r\n             \r\n            }\r\n          }   \r\n          setPosts(loadedPosts);\r\n          setLoading(false);\r\n          });\r\n        });\r\n      });  \r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchPostsHandler(); \r\n  }, [fetchPostsHandler,props.toggleNewPost]);\r\n \r\n\r\n  const postList = posts.map((post) => (\r\n    <PostCard\r\n      id={post.id}\r\n      key={post.id}\r\n      text={post.text}\r\n      imageURL={post.imageURL}\r\n      userId={post.userId}\r\n      displayName={post.displayName}\r\n      photoUrl={post.photoUrl}\r\n      likes={post.likes}\r\n    />\r\n  )).reverse();\r\n  return <div className=\"post-list-container\">{!loading ? <div>{postList}</div> : <Loader \r\n  type=\"TailSpin\"\r\n  color=\"#585d99\"\r\n  height={100}\r\n  width={100}\r\n/>}</div>;\r\n};\r\nexport default PostList;\r\n","import PostForm from \"../components/Post/PostForm\";\r\nimport PostList from \"../components/Post/PostList\";\r\nimport { useState } from \"react\";\r\nconst Feed = () => {\r\n  const [toggleNewPost,setToggleNewPost]=useState(false);\r\n  const sendPostHandler = () => {\r\n    setToggleNewPost(toggleNewPost=>!toggleNewPost);\r\n  };\r\n  return (\r\n    <div>\r\n      <PostForm sendPost={sendPostHandler}  />\r\n      <PostList toggleNewPost={toggleNewPost} />\r\n    </div>\r\n  );\r\n};\r\nexport default Feed;\r\n","export default __webpack_public_path__ + \"static/media/edit.a609e087.svg\";","export default __webpack_public_path__ + \"static/media/tick.acf55764.svg\";","export default __webpack_public_path__ + \"static/media/close.195726a4.svg\";","import \"./ProfileInfo.css\";\r\nimport edit from \"../../assets/images/edit.svg\";\r\nimport tick from \"../../assets/images/tick.svg\";\r\nimport close from \"../../assets/images/close.svg\";\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport firebase from \"../../Firebase/Firebase\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Filter from 'bad-words';\r\n\r\nconst ProfileInfo = (props) => {\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const uploadedFileInput = useRef();\r\n\r\n  const [photoUrl, setPhotoUrl] = useState(props.photoUrl);\r\n  const [displayName, setDisplayName] = useState(props.displayName);\r\n  const [email, setEmail] = useState(props.email);\r\n  const [enteredName, setEnteredName] = useState(displayName);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isPhotoEdit, setIsPhotoEdit] = useState(false);\r\n  const [isPhotoAdded, setIsPhotoAdded] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [prohibited, setProhibited] = useState(false);\r\n  const [isEnteredNameValid, setIsEnteredNameValid] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setDisplayName(props.displayName);\r\n    setEmail(props.email);\r\n    setPhotoUrl(props.photoUrl);\r\n  }, [props.displayName, props.photoUrl, props.email]);\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n  const userId = localStorage.getItem(\"userId\");\r\n\r\n  const validateEnteredName = (name) => {\r\n    return name.length < 21 && name.length > 0;\r\n  };\r\n  const nameEditHandler = () => {\r\n    setIsEnteredNameValid(true);\r\n    setIsEditing((isEditing) => !isEditing);\r\n  };\r\n  const photoEditHandler = () => {\r\n    setIsPhotoAdded(false);\r\n    setPhotoUrl(localStorage.getItem(\"photoUrl\"));\r\n    setIsPhotoEdit((isPhotoEdit) => !isPhotoEdit);\r\n  };\r\n  const photoPreviewHandler = (event) => {\r\n    setLoading(true);\r\n    const file = event.target.files[0];\r\n    setIsPhotoAdded(true);\r\n    var storage = firebase.storage();\r\n    var storageRef = storage.ref();\r\n    var uploadTask = storageRef\r\n      .child(`avatars/${userId}/${file.name}`)\r\n      .put(file);\r\n\r\n    uploadTask.on(\r\n      firebase.storage.TaskEvent.STATE_CHANGED,\r\n      (snapshot) => {},\r\n      (error) => {\r\n        throw error;\r\n      },\r\n      () => {\r\n        uploadTask.snapshot.ref.getDownloadURL().then((url) => {\r\n          setPhotoUrl(url);\r\n          setLoading(false);\r\n        });\r\n      }\r\n    );\r\n  };\r\n  const nameHandler = (event) => {\r\n    setEnteredName(event.target.value);\r\n  };\r\n  const fetchEditedData = (bodyFetch) => {\r\n    fetch(\r\n      `https://react-http-560ff-default-rtdb.firebaseio.com/users/${userId}.json?auth=${token}`,\r\n      {\r\n        method: \"PATCH\",\r\n        body: JSON.stringify(bodyFetch),\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      }\r\n    )\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        } else {\r\n          res.json().then((data) => {});\r\n        }\r\n      })\r\n      .then((data) => {\r\n        dispatch({\r\n          type: \"SET_USER_INFO\",\r\n          payload: {\r\n            displayName: localStorage.getItem(\"displayName\"),\r\n            photoUrl: localStorage.getItem(\"photoUrl\"),\r\n          },\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      });\r\n  };\r\n\r\n  const nameSaveHandler = () => {\r\n    setProhibited(false);\r\n    var filter = new Filter(); \r\n    if (filter.isProfane(enteredName)) {\r\n      setProhibited(true);\r\n      return;\r\n    }\r\n    if (!validateEnteredName(enteredName)) {\r\n      setIsEnteredNameValid(false);\r\n      return;\r\n    } else setIsEnteredNameValid(true);\r\n    localStorage.removeItem(\"displayName\");\r\n    localStorage.setItem(\"displayName\", enteredName);\r\n    fetchEditedData({\r\n      displayName: enteredName,\r\n    });\r\n    nameEditHandler();\r\n    setDisplayName(enteredName);\r\n  };\r\n\r\n  const photoSaveHandler = (event) => {\r\n    localStorage.removeItem(\"photoURL\");\r\n    localStorage.setItem(\"photoUrl\", photoUrl);\r\n    fetchEditedData({\r\n      photoUrl,\r\n    });\r\n\r\n    setIsPhotoEdit(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <div className=\"profile-image-side\">\r\n        <div className=\"profile-image\">\r\n          {!loading ? <img src={photoUrl} alt=\"avatar\" /> : <p>Loading...</p>}\r\n          {location.pathname === \"/social-media/profile\" && (\r\n            <div className=\"profile-image-photo-edit\">\r\n              {isPhotoEdit ? (\r\n                <input\r\n                  type=\"file\"\r\n                  name=\"avatar\"\r\n                  accept=\"image/png, image/jpeg, image/jpg\"\r\n                  ref={uploadedFileInput}\r\n                  onChange={photoPreviewHandler}\r\n                />\r\n              ) : (\r\n                <button\r\n                  className=\"profile-chnage-photo-button\"\r\n                  onClick={photoEditHandler}\r\n                >\r\n                  Change photo\r\n                </button>\r\n              )}\r\n              {isPhotoEdit && (\r\n                <div className=\"profile-edit-photo-buttons-div\">\r\n                  {isPhotoAdded && (\r\n                    <button\r\n                      className=\"profile-edit-name-button\"\r\n                      onClick={photoSaveHandler}\r\n                    >\r\n                      <img src={tick} />\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    className=\"profile-edit-name-button\"\r\n                    onClick={photoEditHandler}\r\n                  >\r\n                    <img src={close} />\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"profile-info\">\r\n        <div className=\"profile-edit-name\">\r\n          {isEditing && location.pathname === \"/social-media/profile\" ? (\r\n            <input type=\"text\" value={enteredName} onChange={nameHandler} />\r\n          ) : (\r\n            <div className=\"profile-name\">{displayName}</div>\r\n          )}\r\n          {location.pathname === \"/social-media/profile\" && (\r\n            <div>\r\n              {isEditing ? (\r\n                <div className=\"profile-edit-name-buttons-div\">\r\n                  <button\r\n                    className=\"profile-edit-name-button\"\r\n                    onClick={nameSaveHandler}\r\n                  >\r\n                    <img src={tick} />\r\n                  </button>\r\n                  <button\r\n                    className=\"profile-edit-name-button\"\r\n                    onClick={nameEditHandler}\r\n                  >\r\n                    <img src={close} />\r\n                  </button>\r\n                </div>\r\n              ) : (\r\n                <button\r\n                  className=\"profile-edit-name-button\"\r\n                  onClick={nameEditHandler}\r\n                >\r\n                  <img src={edit} />\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        {isEditing && !isEnteredNameValid && (\r\n          <p div className=\"profile-name-error\">\r\n            Name has to be shorter than 20 characters and atleast 1 character.\r\n          </p>\r\n        )}\r\n        {prohibited && (\r\n          <p div className=\"profile-name-error\">\r\n            Innapproriate name\r\n          </p>\r\n        )}\r\n        <div className=\"profile-email\">{email}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default ProfileInfo;\r\n","import \"./ProfilePosts.css\";\r\nimport PostCard from \"../Post/PostCard\";\r\nimport { useLocation } from \"react-router\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nconst ProfilePosts = (props) => {\r\n  const location = useLocation();\r\n  const userId = localStorage.getItem(\"userId\");\r\n  const displayName = useSelector((state) => state.userInfo.displayName);\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  let likesList = [];\r\n  let likeInfo = [];\r\n\r\n  useEffect(() => { \r\n    setLoading(true);\r\n    fetch(`https://react-http-560ff-default-rtdb.firebaseio.com/liked.json`)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        likeInfo = data;\r\n      });\r\n    if (location.pathname === \"/social-media/profile\") {\r\n      return fetchPosts(userId);    \r\n    } else {\r\n      const currentUserId = props.currentUserId;\r\n      return fetchPosts(currentUserId);   \r\n    }\r\n  }, [fetch, props.displayName, displayName, userId]);\r\n  const fetchPosts = (uid) => {\r\n    let postList = [];\r\n    fetch(\r\n      `https://react-http-560ff-default-rtdb.firebaseio.com/posts/${uid}.json`\r\n    )\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        for (const key in data) {\r\n          likesList=[];\r\n          for (const postLikeId in likeInfo) {\r\n            if (postLikeId === key) {\r\n              likesList.push(likeInfo[postLikeId]);\r\n            }\r\n          }\r\n          postList.push({\r\n            id: key,\r\n            text: data[key].text,\r\n            imageURL: data[key].imageURL,\r\n            userId: uid,\r\n            displayName: props.displayName,\r\n            photoUrl: props.photoUrl,\r\n            likes: likesList,\r\n          });\r\n        }\r\n        setPosts(postList);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  const postList = posts.map((post) => (\r\n    <PostCard\r\n      id={post.id}\r\n      key={post.id}\r\n      text={post.text}\r\n      imageURL={post.imageURL}\r\n      userId={post.userId}\r\n      displayName={post.displayName}\r\n      photoUrl={post.photoUrl}\r\n      likes={post.likes}\r\n      ownProfile={props.ownProfile}\r\n    />\r\n  )).reverse();\r\n  return <div className=\"post-list-container\">{!loading ? postList : <Loader \r\n    type=\"TailSpin\"\r\n    color=\"#585d99\"\r\n    height={100}\r\n    width={100}\r\n  \r\n  />}</div>;\r\n};\r\nexport default ProfilePosts;\r\n","import ProfileInfo from \"../components/Profile/ProfileInfo\";\r\nimport ProfilePosts from \"../components/Profile/ProfilePosts\";\r\nimport { useLocation, useHistory } from \"react-router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport avatar from \"../assets/images/user.png\";\r\nconst Profile = () => {\r\n  const history = useHistory();\r\n  const [photoUrl, setPhotoUrl] = useState(\r\n    useSelector((state) => state.userInfo.photoUrl)\r\n  );\r\n  const userDisplayName = useSelector((state) => state.userInfo.displayName);\r\n  const [displayName, setDisplayName] = useState(\r\n    useSelector((state) => state.userInfo.displayName)\r\n  );\r\n  const [email, setEmail] = useState(\r\n    useSelector((state) => state.userInfo.email)\r\n  );\r\n  const [loading, setLoading] = useState(true);\r\n  const location = useLocation();\r\n  const token = localStorage.getItem(\"token\");\r\n  const currentUserId = location.pathname.slice(19, location.pathname.length);\r\n\r\n  useEffect(() => {\r\n    if (location.pathname !== \"/social-media/profile\") {\r\n      setLoading(true);\r\n      fetch(\r\n        `https://react-http-560ff-default-rtdb.firebaseio.com/users/${currentUserId}.json?auth=${token}`\r\n      )\r\n        .then((res) => {\r\n          if (res.ok) {\r\n            return res.json();\r\n          } else {\r\n            console.log(res);\r\n            res.json().then((data) => {});\r\n          }\r\n        })\r\n        .then((data) => {\r\n          setDisplayName(data.displayName);\r\n          setEmail(data.email);\r\n          if (data.photoUrl === \"\") {\r\n            setPhotoUrl(avatar);\r\n          } else {\r\n            setPhotoUrl(data.photoUrl);\r\n          }\r\n          setLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.message);\r\n        });\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [location, currentUserId, token]);\r\n\r\n  return (\r\n    <div>\r\n      {!loading ? (\r\n        location.pathname === \"/social-media/profile\" ? (\r\n          <ProfileInfo\r\n            displayName={userDisplayName}\r\n            email={localStorage.getItem(\"email\")}\r\n            photoUrl={localStorage.getItem(\"photoUrl\")}\r\n          />\r\n        ) : (\r\n          <ProfileInfo\r\n            displayName={displayName}\r\n            email={email}\r\n            photoUrl={photoUrl}\r\n          />\r\n        )\r\n      ) : (\r\n        <p>Loading</p>\r\n      )}\r\n\r\n      {!loading ? (\r\n        <div>\r\n          {location.pathname === \"/social-media/profile\" ? (\r\n            <ProfilePosts\r\n              displayName={userDisplayName}\r\n              photoUrl={localStorage.getItem(\"photoUrl\")}\r\n              ownProfile={true}\r\n            />\r\n          ) : (\r\n            <ProfilePosts\r\n              currentUserId={currentUserId}\r\n              displayName={displayName}\r\n              photoUrl={photoUrl}\r\n              ownProfile={false}\r\n            />\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <p>Loading</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default Profile;\r\n","import \"./App.css\";\r\nimport Header from \"./components/Layout/Header\";\r\nimport { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport Authentification from \"./pages/Authentication\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Feed from \"./pages/Feed\";\r\nimport Profile from \"./pages/Profile\";\r\n\r\nfunction App() {\r\n  const isLoggedIn = useSelector((state) => state.isLoggedIn);\r\n  const userId=localStorage.getItem(\"userId\");\r\n \r\n  return (\r\n    <main>\r\n      <Header />\r\n      <Switch>\r\n        <Route path=\"/social-media\" exact>\r\n          {!isLoggedIn && (\r\n            <Redirect to=\"/social-media/login\">\r\n              <Authentification />\r\n            </Redirect>\r\n          )}\r\n          {isLoggedIn && (\r\n            <Redirect to=\"/social-media/feed\">\r\n              <Feed />\r\n            </Redirect>\r\n          )}\r\n        </Route>\r\n        {!isLoggedIn && (\r\n          <Route path=\"/social-media/login\">\r\n            <Authentification />\r\n          </Route>\r\n        )}\r\n        {!isLoggedIn && (\r\n          <Route path=\"/social-media/signup\">\r\n            <Authentification />\r\n          </Route>\r\n        )}\r\n         {isLoggedIn && (\r\n          <Route path=\"/social-media/profile\">\r\n           <Profile/>\r\n          </Route>\r\n        )}\r\n        {isLoggedIn && (\r\n          <Route path=\"/social-media/feed\">\r\n            <Feed />\r\n          </Route>\r\n        )}\r\n        {isLoggedIn && (\r\n          <Route path={`/social-media/user/${userId}`}>\r\n            <Redirect to=\"/social-media/profile\" />\r\n          </Route>\r\n        )}\r\n         {isLoggedIn && (\r\n          <Route path=\"/social-media/user\">\r\n            <Profile/>\r\n          </Route>\r\n        )}\r\n        <Route path=\"*\">\r\n          <Redirect to=\"/social-media\" />\r\n        </Route>\r\n      </Switch>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport store from './store/store';\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <Provider store={store}>    \n    <BrowserRouter >\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}